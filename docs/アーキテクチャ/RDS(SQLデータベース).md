# RDS (SQLデータベース)

SQLデータベースはその検索制から現代においても最も使用しやすいデータベースです。  
これから構築するのであれば RDS Data API の使用を前提に構築することを強く推奨します。

## 注意点

SQLサーバー（クラスター）はその構造上、エンドポイントをパブリックに公開してしまうため、VPC（閉鎖網）で外部からアクセスできない状態に構成しつつ開発者はアクセス可能な状態にネットワーク構築する必要がありネットワークインフラの知識がフルに必要になります。

また、上記を満たそうとするとネットワーク関連で非常に多くのリソースを作成する必要があるので、RDS単体のコスト試算よりもかなりの多めにコストがかかります。

### RDS Data API

最近追加された RDS Data API を使用するのであれば単純にVPCで囲うだけで良くなるため、高価なNATや踏み台サーバーすらも必須ではなくなるためおすすめしています。  
また、RDS Data API　を使用するとコネクションプーリングも自動でいい感じに処理してくれるため RDS Proxy の設置も不要になり、付帯する無駄なリソースコストを最大限削減することができます。

ただし、AWS SDKからしかSQLを発行できないためデメリットもあります。

- 既存のORM系ツールは全て使えない。
- ローカルのMySQLクラアントも使えない。（AWSコンソール内のQueryEditorで代替します）

## インスタンスクラス

### Serverless v2（安くもないけどスケールしやすい）

今選ばれているのが Aurora Serverless V2 です。＊サーバーレスですがそんなに安くはありません。  
待機時の最小ACUを0に設定できるようになったため、夜間ユーザーが使用していない時間の稼動コストを大幅に削減できるようになりました。

### メモリ最適化クラス（高いけど安定）

本番稼働に適したクラス。サーバー構成も強いので高いですが一定料金で安定して稼動してくれます。

### バースト可能クラス（安いけど不安定）

「バースト可能」という限界突破してくれそうな字面のせいで理解されにくいですが、**このクラスはバートチケットを使い切ると一気に速度が落ちます。** （スマホで言うパケ死の状態に近い）  
要するに、普段の使用で使い切らなかった処理量をバートチケットとしてストックしており、一時的なアクセス増加時にバートチケットを消費して限界突破してくれるクラスです。  
そのため、純粋にユーザーが増えて恒常的にアクセスが増えるとバーストチケットを使い果たしてパケ死し、一気に速度が落ちてサービスが停止する可能性があります。

### 最適化された読み取りクラス - 新規

まだ情報少ないです。強い内部メモリを持っているので高額なクラスかもしれません。  
一見すると値段順の並びになっているので一番下にあるからと言って選択すると痛い目に遭う可能性が高いです。
